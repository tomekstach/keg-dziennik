define(["jquery","core/notification","core/custom_interaction_events","core/modal","core/modal_registry"],(function($,Notification,CustomEvents,Modal,ModalRegistry){var registered=!1,SELECTORS_SAVE_BUTTON='[data-action="save"]',SELECTORS_CANCEL_BUTTON='[data-action="cancel"]',SELECTORS_SELECT_COURSE="#id_course",ModalAdd=function(root){Modal.call(this,root),this.getFooter().find(SELECTORS_SAVE_BUTTON).length||Notification.exception({message:"No save button found"}),this.getFooter().find(SELECTORS_CANCEL_BUTTON).length||Notification.exception({message:"No cancel button found"})};return ModalAdd.TYPE="local_addcoordinator-addenrol",(ModalAdd.prototype=Object.create(Modal.prototype)).constructor=ModalAdd,ModalAdd.prototype.registerEventListeners=function(){Modal.prototype.registerEventListeners.call(this),this.getModal().on(CustomEvents.events.activate,SELECTORS_SAVE_BUTTON,function(e,data){var school=this.getRoot().find("#id_school").val(),group=this.getRoot().find("#id_group").val(),course=this.getRoot().find("#id_course").val(),idval=this.getRoot().find("#inputID").val(),alertObject=this.getRoot().find("#user-notifications");$.ajax({type:"POST",url:"/local/addcoordinator/addenrol.php?id="+idval+"&school="+school+"&group="+group+"&course="+course,success:function(data){var result=JSON.parse(data);!0===result.error?(alertObject.find("div.alert").html(result.message),alertObject.show()):window.location.reload(!0)}})}.bind(this)),this.getModal().on(CustomEvents.events.activate,SELECTORS_CANCEL_BUTTON,function(e,data){this.hide()}.bind(this)),this.getModal().on(CustomEvents.events.activate,SELECTORS_SELECT_COURSE,function(e,data){var alertObject=this.getRoot().find("#user-notifications");alertObject.find("div.alert").html(""),alertObject.hide()}.bind(this))},registered||(ModalRegistry.register(ModalAdd.TYPE,ModalAdd,"local_addcoordinator/modal_addenrol"),registered=!0),ModalAdd}));